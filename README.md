# ğŸš— GLM-4.6V äº¤é€šåœºæ™¯è‡ªåŠ¨æ ‡æ³¨ç³»ç»Ÿ

> åŸºäºå¤§æ¨¡å‹çš„è‡ªåŠ¨åŒ–å›¾åƒæ ‡æ³¨æµæ°´çº¿ï¼Œå®ç°äº¤é€šåœºæ™¯ä¸­è¡Œäººã€è½¦è¾†ã€äº¤é€šæ ‡å¿—çš„æ™ºèƒ½æ£€æµ‹ä¸æ ‡æ³¨ã€‚

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®ä½¿ç”¨ **GLM-4.6V** å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼Œå®ç°å¯¹äº¤é€šåœºæ™¯è§†é¢‘å…³é”®å¸§çš„è‡ªåŠ¨æ ‡æ³¨ã€‚æ”¯æŒæ£€æµ‹è¡Œäººã€è½¦è¾†ã€äº¤é€šæ ‡å¿—ã€æ–½å·¥æ ‡å¿—ç­‰å¤šç±»ç›®æ ‡ï¼Œè¾“å‡ºä¸ä¸»æµæ ‡æ³¨è½¯ä»¶ï¼ˆå¦‚ X-AnyLabelingï¼‰å…¼å®¹çš„ JSON æ ¼å¼ã€‚

---

## ğŸ”„ æ ¸å¿ƒæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ æ•°æ®å‡†å¤‡  â”‚ -> â”‚  ğŸ¤– æ¨¡å‹æ¨ç†  â”‚ -> â”‚  ğŸ”§ åå¤„ç†   â”‚ -> â”‚  ğŸ“¦ ç»“æœå¯¼å‡º  â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ å›¾ç‰‡ç­›é€‰     â”‚    â”‚ GLM-4.6V    â”‚    â”‚ åæ ‡è½¬æ¢    â”‚    â”‚ JSONä¿å­˜    â”‚
â”‚ Base64ç¼–ç   â”‚    â”‚ è¯­ä¹‰ç†è§£     â”‚    â”‚ æ ‡ç­¾æ¸…æ´—    â”‚    â”‚ å¯è§†åŒ–è¾“å‡º  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1ï¸âƒ£ æ•°æ®å‡†å¤‡ (Data Preparation)
è„šæœ¬æ ¹æ®å‘½ä»¤è¡Œå‚æ•°ç­›é€‰æŒ‡å®šå‰ç¼€çš„ç›®æ ‡å›¾ç‰‡ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Base64 ç¼–ç æ ¼å¼ï¼Œå®Œæˆ API è°ƒç”¨å‰çš„é¢„å¤„ç†å·¥ä½œã€‚

### 2ï¸âƒ£ æ¨¡å‹æ¨ç† (Model Inference)
è°ƒç”¨ **GLM-4.6V** å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼Œé€šè¿‡é¢„è®¾çš„æç¤ºè¯ï¼ˆPromptï¼‰å¼•å¯¼æ¨¡å‹å¯¹å›¾åƒè¿›è¡Œè¯­ä¹‰ç†è§£ï¼Œè¯†åˆ«å‡ºè¡Œäººã€è½¦è¾†ã€äº¤é€šæ ‡å¿—ç­‰ç‰¹å®šç›®æ ‡ï¼Œå¹¶è¿”å›åŸå§‹æ£€æµ‹æ•°æ®ã€‚

### 3ï¸âƒ£ æ•°æ®åå¤„ç† (Post-Processing)
å¯¹æ¨¡å‹è¿”å›çš„åŸå§‹æ•°æ®è¿›è¡ŒäºŒæ¬¡åŠ å·¥ï¼š
- **åæ ‡è½¬æ¢**ï¼šå°†æ¨¡å‹è¾“å‡ºçš„å½’ä¸€åŒ–ç›¸å¯¹åæ ‡ï¼Œæ¢ç®—ä¸ºå›¾åƒå®é™…çš„ç»å¯¹åƒç´ åæ ‡
- **æ ‡ç­¾æ¸…æ´—**ï¼šé€šè¿‡æ˜ å°„å­—å…¸æ‰§è¡Œæ ‡å‡†åŒ–é€»è¾‘ï¼Œå°†åŒä¹‰è¯ã€ä¸­æ–‡æˆ–ä¸è§„èŒƒæ ‡ç­¾ç»Ÿä¸€è½¬æ¢ä¸ºæ ‡å‡†çš„è‹±æ–‡æ ‡ç­¾

### 4ï¸âƒ£ ç»“æœå¯¼å‡º (Result Export)
å°†æ¸…æ´—åçš„ç»“æ„åŒ–æ•°æ®å°è£…ä¸º JSON æ ¼å¼å¹¶ä¿å­˜ã€‚è¯¥æ ¼å¼ä¸ä¸»æµæ ‡æ³¨è½¯ä»¶ï¼ˆå¦‚ X-AnyLabelingï¼‰å…¼å®¹ï¼Œæ”¯æŒç›´æ¥åŠ è½½ä»¥è¿›è¡Œäººå·¥æ ¡éªŒæˆ–äºŒæ¬¡ç¼–è¾‘ã€‚

---

## ğŸ“Š æ£€æµ‹ç±»åˆ«

| ç±»åˆ« | æ ‡ç­¾ç¤ºä¾‹ | é¢œè‰² |
|------|---------|------|
| ğŸ”´ è¡Œäºº | `pedestrian`, `cyclist`, `crowd` | çº¢è‰² |
| ğŸŸ¢ è½¦è¾† | `car`, `truck`, `bus`, `taxi`, `van`, `suv`, `motorcycle` | ç»¿è‰² |
| ğŸ”µ äº¤é€šæ ‡å¿— | `speed_limit_70`, `direction_sign`, `no_entry`, `traffic_light` | è“è‰² |
| ğŸŸ  æ–½å·¥æ ‡å¿— | `traffic_cone`, `construction_barrier` | æ©™è‰² |

---

## ğŸ—‚ï¸ æ•°æ®é›†ç»“æ„

ä»¥ D1 æ•°æ®é›†ä¸ºä¾‹ï¼š

```
D1_dataset/
â”œâ”€â”€ ğŸ“„ D1_annotation_report.txt     # æ•°æ®æ ‡æ³¨æ€»ç»“æŠ¥å‘Š
â”œâ”€â”€ ğŸ¬ video/
â”‚   â””â”€â”€ D1.mp4                      # æºè§†é¢‘
â”œâ”€â”€ ğŸ–¼ï¸ frames/
â”‚   â””â”€â”€ D1_frame_*.jpg              # åŸå§‹å…³é”®å¸§ (169å¼ )
â”œâ”€â”€ ğŸ“‹ annotations/
â”‚   â””â”€â”€ D1_frame_*.json             # JSONæ ‡æ³¨æ–‡ä»¶ (169ä¸ª)
â””â”€â”€ ğŸ¨ visualized/
    â””â”€â”€ D1_frame_*_annotated.jpg    # å¯è§†åŒ–æ ‡æ³¨å›¾ç‰‡ (169å¼ )
```

---

## ğŸ“ˆ D1 æ•°æ®é›†ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| ğŸ“ æ€»å¸§æ•° | 169 |
| ğŸ“¦ æ€»æ£€æµ‹ç›®æ ‡ | 464 |
| âšª ç©ºå¸§ç‡ | 6.5% |
| ğŸ“ˆ å¹³å‡æ¯å¸§ | 2.75 ä¸ªç›®æ ‡ |

### æ ‡ç­¾åˆ†å¸ƒ Top 10

| æ’å | æ ‡ç­¾ | æ•°é‡ |
|------|------|------|
| 1 | `car` | 251 |
| 2 | `direction_sign` | 55 |
| 3 | `van` | 39 |
| 4 | `suv` | 33 |
| 5 | `motorcycle` | 23 |
| 6 | `taxi` | 15 |
| 7 | `bus` | 15 |
| 8 | `truck` | 11 |
| 9 | `expressway_sign` | 8 |
| 10 | `speed_limit_70` | 4 |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. é…ç½® API Key
```bash
export ZAI_API_KEY="your_api_key_here"
```

### 3. è¿è¡Œæ ‡æ³¨
```bash
# æ ‡æ³¨ D1 ç³»åˆ—å›¾ç‰‡
python3 auto_labeling_universal.py --prefix D1

# æ ‡æ³¨ D2 ç³»åˆ—å›¾ç‰‡ï¼ˆé™åˆ¶æ•°é‡ï¼‰
python3 auto_labeling_universal.py --prefix D2 --limit 20
```

### 4. ç”Ÿæˆå¯è§†åŒ–
```bash
python3 visualize_universal.py --prefix D1
```

### 5. ç”ŸæˆæŠ¥å‘Š
```bash
python3 generate_report.py --prefix D1
```

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `auto_labeling_universal.py` | é€šç”¨æ ‡æ³¨è„šæœ¬ï¼Œæ”¯æŒä»»æ„å‰ç¼€çš„å›¾ç‰‡ |
| `visualize_universal.py` | é€šç”¨å¯è§†åŒ–è„šæœ¬ |
| `generate_report.py` | æ ‡æ³¨æŠ¥å‘Šç”Ÿæˆè„šæœ¬ |
| `batch_describe.py` | å›¾ç‰‡æè¿°è„šæœ¬ |

---

## ğŸ“„ è¾“å‡ºæ ¼å¼

æ ‡æ³¨ç»“æœé‡‡ç”¨ **X-AnyLabeling** å…¼å®¹çš„ JSON æ ¼å¼ï¼š

```json
{
  "version": "0.4.1",
  "shapes": [
    {
      "label": "car",
      "points": [[100, 200], [300, 400]],
      "shape_type": "rectangle",
      "flags": {"category": "vehicle"}
    }
  ],
  "imagePath": "D1_frame_0001.jpg",
  "imageHeight": 1080,
  "imageWidth": 1920
}
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

- **å¤šæ¨¡æ€æ¨¡å‹**: GLM-4.6V
- **Python SDK**: zai-sdk
- **å›¾åƒå¤„ç†**: Pillow
- **è¾“å‡ºæ ¼å¼**: X-AnyLabeling JSON

---

## ğŸ“ License

MIT License

---

<p align="center">
  <b>ğŸš€ Powered by GLM-4.6V</b>
</p>