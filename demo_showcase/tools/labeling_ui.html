<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>标注工具 - Sign Labeling UI</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            min-height: 100vh;
            color: #e4e4e4;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }

        h1 { font-size: 1.8rem; margin-bottom: 8px; }
        h1 span { color: #00d9ff; }
        .subtitle { color: #888; margin-bottom: 30px; }

        .demo-window {
            background: #0d0d1a;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }
        .window-header {
            background: #2d2d3a;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .window-dot {
            width: 12px; height: 12px;
            border-radius: 50%;
        }
        .dot-red { background: #ff5f57; }
        .dot-yellow { background: #febc2e; }
        .dot-green { background: #28c840; }
        .window-title {
            margin-left: 12px;
            color: #888;
            font-size: 0.9rem;
        }

        .demo-content {
            padding: 20px;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
        }

        .left-panel {
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
            padding: 16px;
        }
        .current-image {
            text-align: center;
        }
        .current-image img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 4px;
            border: 2px solid #00d9ff;
        }
        .current-label {
            margin-top: 12px;
            padding: 8px;
            background: rgba(0,217,255,0.1);
            border-radius: 4px;
            text-align: center;
            font-size: 0.9rem;
        }

        .right-panel h3 {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .search-box {
            flex: 1;
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #444;
            background: #1a1a2e;
            color: white;
            font-size: 0.9rem;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding: 4px;
        }
        .ref-item {
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        .ref-item:hover {
            background: rgba(0,217,255,0.2);
            transform: scale(1.05);
        }
        .ref-item.selected {
            border: 2px solid #00d9ff;
            background: rgba(0,217,255,0.1);
        }
        .ref-item img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            background: rgba(255,255,255,0.02);
            border-radius: 4px;
        }
        .ref-item .name {
            font-size: 0.7rem;
            color: #888;
            margin-top: 4px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .progress-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            height: 6px;
            margin-top: 16px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            height: 100%;
            width: 22%;
        }
        .progress-text {
            margin-top: 6px;
            color: #888;
            font-size: 0.8rem;
        }

        .info-section {
            background: rgba(0,217,255,0.1);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        .info-section h3 {
            color: #00d9ff;
            margin-bottom: 12px;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }
        .feature-item::before {
            content: "✓";
            color: #00ff88;
        }

        .shortcut-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 16px;
        }
        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .key {
            background: #333;
            padding: 4px 10px;
            border-radius: 4px;
            font-family: monospace;
            min-width: 30px;
            text-align: center;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #00d9ff;
            text-decoration: none;
        }
        .back-link:hover { text-decoration: underline; }

        .note {
            background: rgba(255,193,7,0.1);
            border-left: 3px solid #ffc107;
            padding: 12px 16px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">← 返回项目主页</a>

        <h1><span>标注工具</span> Sign Labeling UI</h1>
        <p class="subtitle">对照 188 种香港标准交通标志进行细粒度标注</p>

        <div class="demo-window">
            <div class="window-header">
                <div class="window-dot dot-red"></div>
                <div class="window-dot dot-yellow"></div>
                <div class="window-dot dot-green"></div>
                <span class="window-title">localhost:8082 - Sign Labeling UI</span>
            </div>
            <div class="demo-content">
                <div class="left-panel">
                    <div class="current-image">
                        <img src="../extracted_signs/01_direction_central.png" alt="待标注图片">
                    </div>
                    <div class="current-label">
                        当前标签: <strong>Direction_sign</strong>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-text">已标注: 265 / 1,200</div>
                </div>
                <div class="right-panel">
                    <h3>
                        188 种参考标志
                        <input type="text" class="search-box" placeholder="搜索标志名称... (按 / 聚焦)" value="direction">
                    </h3>
                    <div class="reference-grid" id="reference-grid">
                        <!-- 188 signs loaded by JS -->
                    </div>
                </div>
            </div>
        </div>

        <div class="info-section">
            <h3>功能特点</h3>
            <div class="feature-list">
                <div class="feature-item">左侧显示待标注图片</div>
                <div class="feature-item">右侧 188 种标准参考图</div>
                <div class="feature-item">支持搜索过滤标志</div>
                <div class="feature-item">点击参考图完成标注</div>
                <div class="feature-item">支持"未知"标签</div>
                <div class="feature-item">自动保存进度</div>
            </div>

            <h3 style="margin-top: 20px;">快捷键</h3>
            <div class="shortcut-list">
                <div class="shortcut-item"><span class="key">/</span> 聚焦搜索框</div>
                <div class="shortcut-item"><span class="key">Esc</span> 清空搜索</div>
                <div class="shortcut-item"><span class="key">Z</span> 撤销</div>
                <div class="shortcut-item"><span class="key">←</span> <span class="key">→</span> 导航</div>
                <div class="shortcut-item"><span class="key">Q</span> 保存</div>
            </div>
        </div>

        <div class="note">
            这是工具界面演示。实际使用需在本地运行 <code>python scripts/sign_labeling_ui.py</code>
        </div>
    </div>
    <script>
        const signNames = [
            "100m_Countdown_markers_used_to_indicate_the_distance_to_an_exit_on_the_left_side_of_a_road",
            "200m_Countdown_markers_used_to_indicate_the_distance_to_an_exit_on_the_left_side_of_a_road",
            "300m_Countdown_markers_used_to_indicate_the_distance_to_an_exit_on_the_left_side_of_a_road",
            "Ahead_only",
            "Bend_to_left_ahead",
            "Bicycle_tricycle_route._No_motor_vehicles",
            "Bus_lane_(Franchised_buses)_on_major_road_ahead",
            "Bus_lane_ahead_(Franchised_buses)",
            "Bus_lane_for_franchised_buses_only",
            "Cattle_ahead",
            "Census_point",
            "Children_ahead",
            "Contra-flow_bus_lane_for_franchised_buses_only",
            "Cross_roads_ahead",
            "Cycleway_ahead_(cyclists_on_or_crossing_road_ahead)",
            "Cycling_restriction_–_cyclists_must_dismount_and_push_their_cycles",
            "Cyclists_ahead",
            "Cyclists_must_dismount_and_use_crossing_to_cross_the_road",
            "Cyclists_to_keep_left",
            "Cyclists_to_walk_on_steep_road",
            "Day_plate",
            "Direction_in_which_the_prohibition_or_restriction_applies",
            "Direction_sign",
            "Direction_sign_for_roundabout",
            "Direction_to_Mass_Transit_Railway_(MTR)_Station",
            "Direction_to_vehicular_ferry_pier",
            "Disabled_persons_ahead",
            "Distance_as_shown_to_hazard",
            "Distance_to__Give_way__line",
            "Distance_to__Stop__line",
            "Divert_to_another_carriageway_to_right_ahead",
            "Double_bend_ahead_first_to_right",
            "Dual_carriageway_ahead",
            "Dual_carriageway_ends_ahead",
            "End_of__no_stopping__restriction",
            "End_of_an_expressway",
            "End_of_bus_lane",
            "End_of_cycling_restriction",
            "End_of_public_light_buses__no_stopping__restriction",
            "End_of_rail_only_lane_for_light_rail_vehicles",
            "End_of_road_works",
            "End_of_the_prohibition,_restriction_or_warning",
            "Fog_or_mist_ahead",
            "For_use_by_police_at_accident_site",
            "Get_in_lane",
            "Give_way_to_traffic_on_major_road",
            "Hard_shoulder_–_do_not_use_except_in_an_emergency",
            "Horses_ahead",
            "Indicating_the_categories_of_dangerous_goods",
            "Keep_in_low_gear",
            "Keep_right_(keep_left_if_symbol_reversed)",
            "Left_lane_only_ahead_(Red_bar_indicates_that_lanes_are_closed)",
            "Left_lane_only_ahead_on_two-way_road_(Red_bar_indicates_that_lanes_are_closed)",
            "Left_lane_shows_bus_lane_for_franchised_buses_only_during_the_time_and_date_shown",
            "Length_over_which_the_prohibition_or_hazard_exists",
            "Level_crossing_with_barrier_ahead",
            "Light_rail_vehicle_lane_or_tram_lane_ahead",
            "Light_rail_vehicle_lane_or_tram_lane_on_major_road_ahead",
            "Light_rail_vehicles_and_trams_only",
            "Light_rail_vehicles_or_trams_ahead",
            "Loose_chippings_ahead",
            "Low-flying_aircraft_or_noise_ahead",
            "Manually_operated_temporary_ʻGoʼ_sign",
            "Manually_operated_temporary_ʻStopʼ_sign",
            "Manually_operated_ʻStop_Goʼ_sign_ahead",
            "Merging_into_main_traffic_on_left",
            "No_bicycles",
            "No_buses_and_coaches",
            "No_entry_for_all_vehicles",
            "No_entry_for_vehicles",
            "No_exit_for_vehicles",
            "No_goods_vehicles",
            "No_learner_drivers",
            "No_motor_cycles_or_motor_tricycles",
            "No_motor_vehicles",
            "No_motor_vehicles_except_motor_cyclists_and_motor_tricycles",
            "No_overtaking",
            "No_parking",
            "No_pedestrians",
            "No_pedestrians,_pedestrian_controlled_vehicles,_bicycles_and_tricycles",
            "No_pedestrians,_rickshaws_and_handcarts",
            "No_public_light_buses",
            "No_stopping",
            "No_stopping_at_any_time",
            "No_stopping_between_7AM-12AM",
            "No_stopping_between_7AM-7PM",
            "No_stopping_between_8-10AM_and_5-7PM",
            "No_stopping_for_public_light_buses_between_7AM-12AM",
            "No_through_road_on_left",
            "No_use_of_horn",
            "No_vehicles_carrying_dangerous_goods_of_specified_categories",
            "No_vehicles_or_combinations_of_vehicles_over_length_shown_(including_load)",
            "No_vehicles_over_axle_weight_shown_(including_load)",
            "No_vehicles_over_gross_vehicle_weight_shown_(including_load)",
            "No_vehicles_over_height_shown_(including_load)",
            "No_vehicles_over_width_shown_(including_load)",
            "One_way_road_ahead",
            "One_way_traffic",
            "Overhead_electric_cable_ahead",
            "Parking_place_for_buses_and_coaches_only",
            "Parking_place_for_goods_vehicles_only",
            "Parking_place_for_motor_cycles_only",
            "Parking_place_for_pedal_cycles_only",
            "Parking_place_for_vehicles_other_than_medium_and_heavy_goods_vehicles,_buses,_coaches,_motor_cycles_and_pedal_cycles",
            "Passing_place",
            "Pedestrian_Accident_blackspot_ahead",
            "Pedestrian_crossing_ahead",
            "Pedestrian_on_or_crossing_road_ahead",
            "Pedestrian_priority_zone",
            "Pedestrians_Ahead",
            "Plate_describing_the_hazard_(wording_maybe_varied)",
            "Plate_used_to_state_the_safe_height",
            "Playground_ahead",
            "Prepare_to_stop_if_signalled_to_do_so",
            "Prohibitation_does_not_apply_to_vehicles_gaining_access_to_premises_adjacent_to_the_road",
            "Prohibitation_does_not_apply_to_vehicles_holding_relevant_licenses",
            "Prohibitation_or_mandatory_order_applies_to_vehicles_over_the_gross_vehicle_weight_shown",
            "Prohibitation_or_mandatory_order_applies_to_vehicles_over_the_length_shown",
            "Prohibitation_or_mandatory_order_does_not_apply_to_vehicle_classes_and_time_shown",
            "Prohibitation_or_mandatory_order_does_not_apply_to_vehicle_classes_shown",
            "Prohibition_or_mandatory_order_applies_to_vehicle_class_shown",
            "Prohibition_or_restriction_applies_in_both_directions",
            "Quay-side_or_river_bank_ahead",
            "Ramp_or_sudden_change_of_road_level",
            "Ramp_or_sudden_change_of_road_level_ahead",
            "Red_light_camera_control_zone",
            "Red_light_speed_camera_ahead",
            "Reduce_speed_now",
            "Restricted_headroom_ahead",
            "Restriction_does_not_apply_to_vehicle_classes_shown_to_pick_up_or_drop_off_passengers_(wording_may_be_varied_to_loading_unloading_goods)",
            "Right_lane_closed_ahead_(Red_bar_indicates_that_lanes_are_closed)",
            "Risk_of_falling_or_fallen_rocks_ahead",
            "Road_ahead_closed_to_vehicles",
            "Road_closed_to_vehicles",
            "Road_hump_ahead",
            "Road_narrows_on_both_sides_ahead",
            "Road_narrows_on_left_ahead",
            "Road_works_ahead",
            "School_ahead",
            "Segregated_pedestrian_and_bicycle_tricycle_route._No_motor_vehicles",
            "Sharp_deviation_of_route_to_left",
            "Side_road_to_left_ahead",
            "Sign_at_start_of_single_track_road",
            "Single_file_traffic_ahead",
            "Single_file_traffic_ahead_(wording_may_be_varied_to__Single_track_road_)",
            "Slippery_road_ahead",
            "Slow_(Sign_used_by_police_in_emergency)",
            "Speed_limit_(in_km_h)",
            "Staggered_junction_ahead",
            "Start_and_continuation_of_an_expressway",
            "Start_of_dual_carriageway_ahead",
            "Steep_hill_downwards_ahead",
            "Steep_hill_upwards_ahead",
            "Stop_and_give_way",
            "Stop_at__Census_point_",
            "Stop_or_give_way_ahead_(with_distance_to_line_ahead_given_below)",
            "Street_direction_sign",
            "Street_direction_sign_with_numbers",
            "T-junction_ahead",
            "Temporary_closure_of_lane_or_road",
            "Temporary_closure_of_pedestrian_crossing",
            "Temporary_route_for_pedestrians",
            "Temporary_route_for_pedestrians_(both_directions)",
            "Temporary_routes_for_vehicles",
            "Temporary_sharp_deviation_to_left",
            "Time_plate",
            "Traffic_Accident_blackspot_ahead",
            "Traffic_lights_ahead",
            "Traffic_merging_from_left",
            "Traffic_signals_ahead",
            "Two-way_traffic_across_a_one-way_road_ahead",
            "Two-way_traffic_ahead",
            "Uneven_road_surface_ahead",
            "Use_low_gear",
            "Use_low_gear_for_distance_shown",
            "Used_to_indicate_line_painting_(wording_may_be_varied_to_suit_nature_of_road_work)",
            "Used_with_temporary_traffic_signals._Vehicles_must_not_proceed_beyond_the_sign_when_red_light_shows",
            "Variable_speed_limit_(in_km_h)",
            "Vehicles_must_stop_at_the_sign_(sign_used_by_police)",
            "Vehicles_must_stop_at_the_sign_(sign_used_by_school_crossing_patrol)",
            "Vehicles_must_use_the_left_most_lane_except_when_overtaking",
            "Vehicles_must_use_the_right_most_lane_except_when_overtaking",
            "Vehicles_prohibited_as_indicated_by_supplementary_plate",
            "Visually_impaired_persons_ahead",
            "Warn_of_road_surfacing_works_(wording_may_be_varied_to_suit_specific_hazard)",
            "Warning_to_pedestrians_crossing_road_with_bus_lane",
            "Way_in_for_vehicles",
            "Way_out_for_vehicles"
        ];

        const grid = document.getElementById('reference-grid');
        signNames.forEach((name, index) => {
            const item = document.createElement('div');
            item.className = 'ref-item' + (name === 'Direction_sign' ? ' selected' : '');
            const shortName = name.replace(/_/g, ' ').substring(0, 15) + (name.length > 15 ? '...' : '');
            item.innerHTML = `
                <img src="../reference_signs/${name}.png" alt="${name}" loading="lazy">
                <div class="name" title="${name.replace(/_/g, ' ')}">${shortName}</div>
            `;
            grid.appendChild(item);
        });
    </script>
</body>
</html>
